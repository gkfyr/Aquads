{"version":3,"file":"index.esm.js","sources":["../src/index.ts"],"sourcesContent":["import type { SlotMeta } from \"@aquads/shared/src/types\";\n\nlet API_BASE = \"\"; // default same origin\nexport function setApiBase(base: string) {\n  API_BASE = base || \"\";\n}\n\nexport async function mount(el: HTMLElement, slotId: string) {\n  const s = await fetch(`${API_BASE}/api/slot/${slotId}/current`).then((r) => r.json());\n  const latest = s.latestMetaCid as string | null;\n  if (!latest) {\n    renderPlaceholder(el, \"No creative yet\");\n    return;\n  }\n  const meta = await fetchWalrusJSON(latest);\n  if (!verifySeal(meta)) {\n    renderPlaceholder(el, \"Rejected by policy\");\n    return;\n  }\n  enforceSize(el, meta.width, meta.height);\n\n  const isHtml = (meta as any).type === 'html' || (!(meta as any).img_cid && ((meta as any).title || (meta as any).subtitle));\n  if (isHtml) {\n    const container = document.createElement('div');\n    container.style.position = 'relative';\n    container.style.width = '100%';\n    container.style.height = '100%';\n    const bg = (meta as any).bg || 'linear-gradient(135deg,#0ea5e9,#7c3aed)';\n    container.style.background = bg;\n    container.style.color = '#fff';\n    container.style.display = 'flex';\n    container.style.flexDirection = 'column';\n    container.style.alignItems = 'center';\n    container.style.justifyContent = 'center';\n    container.style.textAlign = 'center';\n    container.style.padding = '8px';\n    const title = document.createElement('div');\n    title.textContent = (meta as any).title || 'Aquads';\n    title.style.font = '700 18px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif';\n    const subtitle = document.createElement('div');\n    subtitle.textContent = (meta as any).subtitle || 'Fast. Simple Ads. Powered by SUI';\n    subtitle.style.font = '12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif';\n    subtitle.style.opacity = '0.9';\n    container.appendChild(title);\n    if (subtitle.textContent) container.appendChild(subtitle);\n    const hideLabel = (window as any).__AQUADS_HIDE_LABEL === true || (window as any).__SUI_AD_HIDE_LABEL === true;\n    if (!hideLabel) {\n      const badge = document.createElement('div');\n      badge.textContent = 'Ad by Aquads';\n      badge.style.position = 'absolute';\n      badge.style.right = '6px';\n      badge.style.bottom = '6px';\n      badge.style.padding = '2px 6px';\n      badge.style.font = '10px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif';\n      badge.style.color = '#fff';\n      badge.style.background = 'rgba(0,0,0,0.45)';\n      badge.style.borderRadius = '4px';\n      badge.style.pointerEvents = 'none';\n      badge.style.userSelect = 'none';\n      container.appendChild(badge);\n    }\n    // Slot ID label (bottom-left) — always show (shortened)\n    const sid = document.createElement('div');\n    const short = (id: string) => {\n      const s = String(id || '');\n      const clean = s.startsWith('0x') ? s.slice(2) : s;\n      const head = clean.slice(0, 6);\n      return '0x' + head + (clean.length > 6 ? '…' : '');\n    };\n    sid.textContent = slotId ? `Slot: ${short(String(slotId))}` : '';\n    sid.style.position = 'absolute';\n    sid.style.left = '6px';\n    sid.style.bottom = '6px';\n    sid.style.padding = '2px 6px';\n    sid.style.font = '10px/1.2 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace';\n    sid.style.color = '#fff';\n    sid.style.background = 'rgba(0,0,0,0.35)';\n    sid.style.borderRadius = '4px';\n    sid.style.pointerEvents = 'none';\n    sid.style.userSelect = 'none';\n    sid.style.maxWidth = '70%';\n    sid.style.whiteSpace = 'nowrap';\n    sid.style.overflow = 'hidden';\n    sid.style.textOverflow = 'ellipsis';\n    if (sid.textContent) container.appendChild(sid);\n    container.onclick = () => {\n      try {\n        fetch(`${API_BASE}/api/track/click`, { method: 'POST', body: JSON.stringify({ slotId, url: meta.landing_url }) }).catch(() => {});\n      } catch {}\n      if (meta.landing_url) window.location.href = meta.landing_url;\n    };\n    el.replaceChildren(container);\n  } else {\n    const img = new Image();\n    img.src = walrusToHttp((meta as any).img_cid);\n    img.style.width = \"100%\";\n    img.style.height = \"100%\";\n    img.style.objectFit = \"cover\";\n    const container = document.createElement(\"div\");\n    container.style.position = \"relative\";\n    container.style.width = \"100%\";\n    container.style.height = \"100%\";\n    container.appendChild(img);\n    const hideLabel = (window as any).__AQUADS_HIDE_LABEL === true || (window as any).__SUI_AD_HIDE_LABEL === true;\n    if (!hideLabel) {\n      const badge = document.createElement(\"div\");\n      badge.textContent = \"Ad by Aquads\";\n      badge.style.position = \"absolute\";\n      badge.style.right = \"6px\";\n      badge.style.bottom = \"6px\";\n      badge.style.padding = \"2px 6px\";\n      badge.style.font = \"10px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif\";\n      badge.style.color = \"#fff\";\n      badge.style.background = \"rgba(0,0,0,0.45)\";\n      badge.style.borderRadius = \"4px\";\n      badge.style.pointerEvents = \"none\";\n      badge.style.userSelect = \"none\";\n      container.appendChild(badge);\n    }\n    img.onload = () => {\n      img.onclick = () => {\n        fetch(`${API_BASE}/api/track/click`, {\n          method: \"POST\",\n          body: JSON.stringify({ slotId, url: meta.landing_url }),\n        }).catch(() => {});\n        window.location.href = meta.landing_url;\n      };\n    };\n    img.onerror = () => {\n      renderPlaceholder(el, \"Image failed to load\");\n    };\n    el.replaceChildren(container);\n  }\n  // Start viewability tracking once creative is in DOM\n  try {\n    startViewability(el, { slotId });\n  } catch {}\n}\n\nexport function renderPlaceholder(el: HTMLElement, text: string) {\n  el.innerHTML = `<div style=\"display:flex;align-items:center;justify-content:center;background:#f2f3f5;color:#666;border:1px dashed #ccc;width:100%;height:100%;font:12px sans-serif;\">${text}</div>`;\n}\n\nexport function enforceSize(el: HTMLElement, w: number, h: number) {\n  const responsive = el.hasAttribute('data-responsive') || (el as any).dataset?.responsive === 'true';\n  if (responsive) {\n    el.style.width = '100%';\n    (el.style as any).aspectRatio = `${w} / ${h}`;\n    el.style.height = 'auto';\n    return;\n  }\n  el.style.width = `${w}px`;\n  el.style.height = `${h}px`;\n}\n\nexport function walrusToHttp(cid: string) {\n  if (cid.startsWith(\"mock://\")) {\n    // Local mock: return uploads path if meta or image present; here we just echo cid\n    return `/uploads/${cid.replace(/^mock:\\/\\//, \"\")}`; // might not exist for images; used for demo\n  }\n  if (cid.startsWith(\"walrus://\")) {\n    return cid.replace(\"walrus://\", (window as any).WALRUS_HTTP_GATEWAY || \"https://walrus.testnet/ipfs/\");\n  }\n  return cid;\n}\n\nexport async function fetchWalrusJSON(metaCid: string): Promise<SlotMeta> {\n  if (metaCid.startsWith(\"mock://sha256-\")) {\n    const id = metaCid.replace(\"mock://sha256-\", \"\");\n    return fetch(`/uploads/${id}.json`).then((r) => r.json());\n  }\n  const url = walrusToHttp(metaCid);\n  return fetch(url).then((r) => r.json());\n}\n\nexport function verifySeal(meta: SlotMeta): boolean {\n  // MVP: mocked verification. Set window.__SEAL_DISABLE=true to bypass.\n  const disabled = (window as any).__SEAL_DISABLE === true;\n  if (disabled) return true;\n  // Basic checksum format check\n  return /^sha256:[0-9a-fA-F]{64}$/.test(meta.checksum);\n}\n\ndeclare global {\n  interface Window {\n    Aquads: any;\n    SuiAds: any;\n    __SEAL_DISABLE?: boolean;\n    WALRUS_HTTP_GATEWAY?: string;\n  }\n}\n\n// UMD export (provide both Aquads and legacy SuiAds aliases)\nconst __aquadsUMD = {\n  mount: (el: HTMLElement | string, opts: { slotId?: string } = {}) => {\n    const elem = typeof el === \"string\" ? (document.querySelector(el) as HTMLElement) : el;\n    const slotId = opts.slotId || elem?.dataset?.slotId || document.currentScript?.getAttribute(\"data-slot\") || \"\";\n    if (!elem || !slotId) return;\n    mount(elem, slotId);\n  },\n  setApiBase,\n};\n(window as any).Aquads = __aquadsUMD;\n(window as any).SuiAds = __aquadsUMD;\n\n// --- Viewability (Active View-like) ---\ntype ViewabilityOpts = { slotId: string; thresholdPct?: number; minDurationMs?: number };\nexport function startViewability(el: HTMLElement, opts: ViewabilityOpts) {\n  const thresholdPct = opts.thresholdPct ?? 0.5; // 50%\n  const minDurationMs = opts.minDurationMs ?? 1000; // 1s\n  let visibleRatio = 0;\n  let maxRatio = 0;\n  let accumMs = 0;\n  let lastTs = performance.now();\n  let pageVisible = document.visibilityState === \"visible\";\n  const thresholds = Array.from({ length: 21 }, (_, i) => i / 20);\n\n  const io = new IntersectionObserver(\n    (entries) => {\n      const e = entries[0];\n      visibleRatio = e.intersectionRatio;\n      if (visibleRatio > maxRatio) maxRatio = visibleRatio;\n    },\n    { root: null, threshold: thresholds }\n  );\n  io.observe(el);\n\n  const onVis = () => {\n    pageVisible = document.visibilityState === \"visible\";\n    lastTs = performance.now();\n  };\n  document.addEventListener(\"visibilitychange\", onVis);\n\n  const timer = setInterval(() => {\n    const now = performance.now();\n    const dt = now - lastTs;\n    lastTs = now;\n    if (pageVisible && visibleRatio >= thresholdPct) accumMs += dt;\n    if (accumMs >= minDurationMs) {\n      try {\n        const payload = {\n          slotId: opts.slotId,\n          maxPct: Math.round(maxRatio * 100),\n          durationMs: Math.round(accumMs),\n          ts: Date.now(),\n        };\n        navigator.sendBeacon?.(\n          `${API_BASE}/api/track/view`,\n          new Blob([JSON.stringify(payload)], { type: \"application/json\" })\n        ) ||\n          fetch(`${API_BASE}/api/track/view`, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(payload),\n          });\n      } catch {}\n      cleanup();\n    }\n  }, 250);\n\n  function cleanup() {\n    clearInterval(timer);\n    io.disconnect();\n    document.removeEventListener(\"visibilitychange\", onVis);\n  }\n  return { stop: cleanup };\n}\n"],"names":[],"mappings":"AAEA,IAAI,QAAQ,GAAG,EAAE,CAAC;AACZ,SAAU,UAAU,CAAC,IAAY,EAAA;AACrC,IAAA,QAAQ,GAAG,IAAI,IAAI,EAAE;AACvB;AAEO,eAAe,KAAK,CAAC,EAAe,EAAE,MAAc,EAAA;IACzD,MAAM,CAAC,GAAG,MAAM,KAAK,CAAC,GAAG,QAAQ,CAAA,UAAA,EAAa,MAAM,CAAA,QAAA,CAAU,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC;AACrF,IAAA,MAAM,MAAM,GAAG,CAAC,CAAC,aAA8B;IAC/C,IAAI,CAAC,MAAM,EAAE;AACX,QAAA,iBAAiB,CAAC,EAAE,EAAE,iBAAiB,CAAC;QACxC;IACF;AACA,IAAA,MAAM,IAAI,GAAG,MAAM,eAAe,CAAC,MAAM,CAAC;AAC1C,IAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;AACrB,QAAA,iBAAiB,CAAC,EAAE,EAAE,oBAAoB,CAAC;QAC3C;IACF;IACA,WAAW,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC;IAExC,MAAM,MAAM,GAAI,IAAY,CAAC,IAAI,KAAK,MAAM,KAAK,CAAE,IAAY,CAAC,OAAO,KAAM,IAAY,CAAC,KAAK,IAAK,IAAY,CAAC,QAAQ,CAAC,CAAC;IAC3H,IAAI,MAAM,EAAE;QACV,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAC/C,QAAA,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU;AACrC,QAAA,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;AAC9B,QAAA,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM;AAC/B,QAAA,MAAM,EAAE,GAAI,IAAY,CAAC,EAAE,IAAI,yCAAyC;AACxE,QAAA,SAAS,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE;AAC/B,QAAA,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;AAC9B,QAAA,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AAChC,QAAA,SAAS,CAAC,KAAK,CAAC,aAAa,GAAG,QAAQ;AACxC,QAAA,SAAS,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ;AACrC,QAAA,SAAS,CAAC,KAAK,CAAC,cAAc,GAAG,QAAQ;AACzC,QAAA,SAAS,CAAC,KAAK,CAAC,SAAS,GAAG,QAAQ;AACpC,QAAA,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK;QAC/B,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QAC3C,KAAK,CAAC,WAAW,GAAI,IAAY,CAAC,KAAK,IAAI,QAAQ;AACnD,QAAA,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,uFAAuF;QAC1G,MAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QAC9C,QAAQ,CAAC,WAAW,GAAI,IAAY,CAAC,QAAQ,IAAI,kCAAkC;AACnF,QAAA,QAAQ,CAAC,KAAK,CAAC,IAAI,GAAG,mFAAmF;AACzG,QAAA,QAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK;AAC9B,QAAA,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC;QAC5B,IAAI,QAAQ,CAAC,WAAW;AAAE,YAAA,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC;AACzD,QAAA,MAAM,SAAS,GAAI,MAAc,CAAC,mBAAmB,KAAK,IAAI,IAAK,MAAc,CAAC,mBAAmB,KAAK,IAAI;QAC9G,IAAI,CAAC,SAAS,EAAE;YACd,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAC3C,YAAA,KAAK,CAAC,WAAW,GAAG,cAAc;AAClC,YAAA,KAAK,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU;AACjC,YAAA,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK;AACzB,YAAA,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK;AAC1B,YAAA,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS;AAC/B,YAAA,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,mFAAmF;AACtG,YAAA,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;AAC1B,YAAA,KAAK,CAAC,KAAK,CAAC,UAAU,GAAG,kBAAkB;AAC3C,YAAA,KAAK,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK;AAChC,YAAA,KAAK,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;AAClC,YAAA,KAAK,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM;AAC/B,YAAA,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC;QAC9B;;QAEA,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AACzC,QAAA,MAAM,KAAK,GAAG,CAAC,EAAU,KAAI;YAC3B,MAAM,CAAC,GAAG,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC;YAC1B,MAAM,KAAK,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;YACjD,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AAC9B,YAAA,OAAO,IAAI,GAAG,IAAI,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;AACpD,QAAA,CAAC;QACD,GAAG,CAAC,WAAW,GAAG,MAAM,GAAG,SAAS,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAA,CAAE,GAAG,EAAE;AAChE,QAAA,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU;AAC/B,QAAA,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK;AACtB,QAAA,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK;AACxB,QAAA,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS;AAC7B,QAAA,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,6GAA6G;AAC9H,QAAA,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;AACxB,QAAA,GAAG,CAAC,KAAK,CAAC,UAAU,GAAG,kBAAkB;AACzC,QAAA,GAAG,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK;AAC9B,QAAA,GAAG,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;AAChC,QAAA,GAAG,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM;AAC7B,QAAA,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK;AAC1B,QAAA,GAAG,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ;AAC/B,QAAA,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ;AAC7B,QAAA,GAAG,CAAC,KAAK,CAAC,YAAY,GAAG,UAAU;QACnC,IAAI,GAAG,CAAC,WAAW;AAAE,YAAA,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC;AAC/C,QAAA,SAAS,CAAC,OAAO,GAAG,MAAK;AACvB,YAAA,IAAI;AACF,gBAAA,KAAK,CAAC,CAAA,EAAG,QAAQ,CAAA,gBAAA,CAAkB,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,MAAK,EAAE,CAAC,CAAC;YACnI;YAAE,OAAA,EAAA,EAAM,EAAC;YACT,IAAI,IAAI,CAAC,WAAW;gBAAE,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW;AAC/D,QAAA,CAAC;AACD,QAAA,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC;IAC/B;SAAO;AACL,QAAA,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE;QACvB,GAAG,CAAC,GAAG,GAAG,YAAY,CAAE,IAAY,CAAC,OAAO,CAAC;AAC7C,QAAA,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;AACxB,QAAA,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM;AACzB,QAAA,GAAG,CAAC,KAAK,CAAC,SAAS,GAAG,OAAO;QAC7B,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAC/C,QAAA,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU;AACrC,QAAA,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;AAC9B,QAAA,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM;AAC/B,QAAA,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC;AAC1B,QAAA,MAAM,SAAS,GAAI,MAAc,CAAC,mBAAmB,KAAK,IAAI,IAAK,MAAc,CAAC,mBAAmB,KAAK,IAAI;QAC9G,IAAI,CAAC,SAAS,EAAE;YACd,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAC3C,YAAA,KAAK,CAAC,WAAW,GAAG,cAAc;AAClC,YAAA,KAAK,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU;AACjC,YAAA,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK;AACzB,YAAA,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK;AAC1B,YAAA,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS;AAC/B,YAAA,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,mFAAmF;AACtG,YAAA,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;AAC1B,YAAA,KAAK,CAAC,KAAK,CAAC,UAAU,GAAG,kBAAkB;AAC3C,YAAA,KAAK,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK;AAChC,YAAA,KAAK,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;AAClC,YAAA,KAAK,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM;AAC/B,YAAA,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC;QAC9B;AACA,QAAA,GAAG,CAAC,MAAM,GAAG,MAAK;AAChB,YAAA,GAAG,CAAC,OAAO,GAAG,MAAK;AACjB,gBAAA,KAAK,CAAC,CAAA,EAAG,QAAQ,CAAA,gBAAA,CAAkB,EAAE;AACnC,oBAAA,MAAM,EAAE,MAAM;AACd,oBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;iBACxD,CAAC,CAAC,KAAK,CAAC,MAAK,EAAE,CAAC,CAAC;gBAClB,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW;AACzC,YAAA,CAAC;AACH,QAAA,CAAC;AACD,QAAA,GAAG,CAAC,OAAO,GAAG,MAAK;AACjB,YAAA,iBAAiB,CAAC,EAAE,EAAE,sBAAsB,CAAC;AAC/C,QAAA,CAAC;AACD,QAAA,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC;IAC/B;;AAEA,IAAA,IAAI;AACF,QAAA,gBAAgB,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC;IAClC;IAAE,OAAA,EAAA,EAAM,EAAC;AACX;AAEM,SAAU,iBAAiB,CAAC,EAAe,EAAE,IAAY,EAAA;AAC7D,IAAA,EAAE,CAAC,SAAS,GAAG,CAAA,sKAAA,EAAyK,IAAI,QAAQ;AACtM;SAEgB,WAAW,CAAC,EAAe,EAAE,CAAS,EAAE,CAAS,EAAA;;AAC/D,IAAA,MAAM,UAAU,GAAG,EAAE,CAAC,YAAY,CAAC,iBAAiB,CAAC,IAAI,CAAA,CAAA,EAAA,GAAC,EAAU,CAAC,OAAO,0CAAE,UAAU,MAAK,MAAM;IACnG,IAAI,UAAU,EAAE;AACd,QAAA,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;QACtB,EAAE,CAAC,KAAa,CAAC,WAAW,GAAG,GAAG,CAAC,CAAA,GAAA,EAAM,CAAC,CAAA,CAAE;AAC7C,QAAA,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM;QACxB;IACF;IACA,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,CAAA,EAAG,CAAC,IAAI;IACzB,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,CAAA,EAAG,CAAC,IAAI;AAC5B;AAEM,SAAU,YAAY,CAAC,GAAW,EAAA;AACtC,IAAA,IAAI,GAAG,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE;;AAE7B,QAAA,OAAO,CAAA,SAAA,EAAY,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAA,CAAE,CAAC;IACrD;AACA,IAAA,IAAI,GAAG,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE;AAC/B,QAAA,OAAO,GAAG,CAAC,OAAO,CAAC,WAAW,EAAG,MAAc,CAAC,mBAAmB,IAAI,8BAA8B,CAAC;IACxG;AACA,IAAA,OAAO,GAAG;AACZ;AAEO,eAAe,eAAe,CAAC,OAAe,EAAA;AACnD,IAAA,IAAI,OAAO,CAAC,UAAU,CAAC,gBAAgB,CAAC,EAAE;QACxC,MAAM,EAAE,GAAG,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC;AAChD,QAAA,OAAO,KAAK,CAAC,CAAA,SAAA,EAAY,EAAE,CAAA,KAAA,CAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC;IAC3D;AACA,IAAA,MAAM,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC;AACjC,IAAA,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC;AACzC;AAEM,SAAU,UAAU,CAAC,IAAc,EAAA;;AAEvC,IAAA,MAAM,QAAQ,GAAI,MAAc,CAAC,cAAc,KAAK,IAAI;AACxD,IAAA,IAAI,QAAQ;AAAE,QAAA,OAAO,IAAI;;IAEzB,OAAO,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;AACvD;AAWA;AACA,MAAM,WAAW,GAAG;AAClB,IAAA,KAAK,EAAE,CAAC,EAAwB,EAAE,IAAA,GAA4B,EAAE,KAAI;;AAClE,QAAA,MAAM,IAAI,GAAG,OAAO,EAAE,KAAK,QAAQ,GAAI,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAiB,GAAG,EAAE;AACtF,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,KAAI,CAAA,EAAA,GAAA,IAAI,KAAA,IAAA,IAAJ,IAAI,KAAA,MAAA,GAAA,MAAA,GAAJ,IAAI,CAAE,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAE,MAAM,CAAA,KAAI,CAAA,EAAA,GAAA,QAAQ,CAAC,aAAa,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,MAAA,GAAA,EAAA,CAAE,YAAY,CAAC,WAAW,CAAC,CAAA,IAAI,EAAE;AAC9G,QAAA,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM;YAAE;AACtB,QAAA,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC;IACrB,CAAC;IACD,UAAU;CACX;AACA,MAAc,CAAC,MAAM,GAAG,WAAW;AACnC,MAAc,CAAC,MAAM,GAAG,WAAW;AAI9B,SAAU,gBAAgB,CAAC,EAAe,EAAE,IAAqB,EAAA;;IACrE,MAAM,YAAY,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,YAAY,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,EAAA,GAAI,GAAG,CAAC;IAC9C,MAAM,aAAa,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,aAAa,MAAA,IAAA,IAAA,EAAA,KAAA,MAAA,GAAA,EAAA,GAAI,IAAI,CAAC;IACjD,IAAI,YAAY,GAAG,CAAC;IACpB,IAAI,QAAQ,GAAG,CAAC;IAChB,IAAI,OAAO,GAAG,CAAC;AACf,IAAA,IAAI,MAAM,GAAG,WAAW,CAAC,GAAG,EAAE;AAC9B,IAAA,IAAI,WAAW,GAAG,QAAQ,CAAC,eAAe,KAAK,SAAS;IACxD,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;IAE/D,MAAM,EAAE,GAAG,IAAI,oBAAoB,CACjC,CAAC,OAAO,KAAI;AACV,QAAA,MAAM,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;AACpB,QAAA,YAAY,GAAG,CAAC,CAAC,iBAAiB;QAClC,IAAI,YAAY,GAAG,QAAQ;YAAE,QAAQ,GAAG,YAAY;IACtD,CAAC,EACD,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,CACtC;AACD,IAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;IAEd,MAAM,KAAK,GAAG,MAAK;AACjB,QAAA,WAAW,GAAG,QAAQ,CAAC,eAAe,KAAK,SAAS;AACpD,QAAA,MAAM,GAAG,WAAW,CAAC,GAAG,EAAE;AAC5B,IAAA,CAAC;AACD,IAAA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,KAAK,CAAC;AAEpD,IAAA,MAAM,KAAK,GAAG,WAAW,CAAC,MAAK;;AAC7B,QAAA,MAAM,GAAG,GAAG,WAAW,CAAC,GAAG,EAAE;AAC7B,QAAA,MAAM,EAAE,GAAG,GAAG,GAAG,MAAM;QACvB,MAAM,GAAG,GAAG;AACZ,QAAA,IAAI,WAAW,IAAI,YAAY,IAAI,YAAY;YAAE,OAAO,IAAI,EAAE;AAC9D,QAAA,IAAI,OAAO,IAAI,aAAa,EAAE;AAC5B,YAAA,IAAI;AACF,gBAAA,MAAM,OAAO,GAAG;oBACd,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC;AAClC,oBAAA,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;AAC/B,oBAAA,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE;iBACf;gBACD,CAAA,CAAA,EAAA,GAAA,SAAS,CAAC,UAAU,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,SAAA,EAClB,CAAA,EAAG,QAAQ,CAAA,eAAA,CAAiB,EAC5B,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,kBAAkB,EAAE,CAAC,CAClE;AACC,oBAAA,KAAK,CAAC,CAAA,EAAG,QAAQ,CAAA,eAAA,CAAiB,EAAE;AAClC,wBAAA,MAAM,EAAE,MAAM;AACd,wBAAA,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE;AAC/C,wBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;AAC9B,qBAAA,CAAC;YACN;YAAE,OAAA,EAAA,EAAM,EAAC;AACT,YAAA,OAAO,EAAE;QACX;IACF,CAAC,EAAE,GAAG,CAAC;AAEP,IAAA,SAAS,OAAO,GAAA;QACd,aAAa,CAAC,KAAK,CAAC;QACpB,EAAE,CAAC,UAAU,EAAE;AACf,QAAA,QAAQ,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,KAAK,CAAC;IACzD;AACA,IAAA,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE;AAC1B;;;;"}