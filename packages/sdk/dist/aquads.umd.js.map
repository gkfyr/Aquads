{"version":3,"file":"aquads.umd.js","sources":["../src/index.ts"],"sourcesContent":["import type { SlotMeta } from \"@aquads/shared/src/types\";\n\nlet API_BASE = \"\"; // default same origin\nexport function setApiBase(base: string) {\n  API_BASE = base || \"\";\n}\n\nexport async function mount(el: HTMLElement, slotId: string) {\n  const s = await fetch(`${API_BASE}/api/slot/${slotId}/current`).then((r) => r.json());\n  const latest = s.latestMetaCid as string | null;\n  if (!latest) {\n    renderPlaceholder(el, \"No creative yet\");\n    return;\n  }\n  const meta = await fetchWalrusJSON(latest);\n  if (!verifySeal(meta)) {\n    renderPlaceholder(el, \"Rejected by policy\");\n    return;\n  }\n  enforceSize(el, meta.width, meta.height);\n\n  const isHtml = (meta as any).type === 'html' || (!(meta as any).img_cid && ((meta as any).title || (meta as any).subtitle));\n  if (isHtml) {\n    const container = document.createElement('div');\n    container.style.position = 'relative';\n    container.style.width = '100%';\n    container.style.height = '100%';\n    const bg = (meta as any).bg || 'linear-gradient(135deg,#0ea5e9,#7c3aed)';\n    container.style.background = bg;\n    container.style.color = '#fff';\n    container.style.display = 'flex';\n    container.style.flexDirection = 'column';\n    container.style.alignItems = 'center';\n    container.style.justifyContent = 'center';\n    container.style.textAlign = 'center';\n    container.style.padding = '8px';\n    const title = document.createElement('div');\n    title.textContent = (meta as any).title || 'Aquads';\n    title.style.font = '700 18px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif';\n    const subtitle = document.createElement('div');\n    subtitle.textContent = (meta as any).subtitle || 'Fast. Simple Ads. Powered by SUI';\n    subtitle.style.font = '12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif';\n    subtitle.style.opacity = '0.9';\n    container.appendChild(title);\n    if (subtitle.textContent) container.appendChild(subtitle);\n    const hideLabel = (window as any).__AQUADS_HIDE_LABEL === true || (window as any).__SUI_AD_HIDE_LABEL === true;\n    if (!hideLabel) {\n      const badge = document.createElement('div');\n      badge.textContent = 'Ad by Aquads';\n      badge.style.position = 'absolute';\n      badge.style.right = '6px';\n      badge.style.bottom = '6px';\n      badge.style.padding = '2px 6px';\n      badge.style.font = '10px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif';\n      badge.style.color = '#fff';\n      badge.style.background = 'rgba(0,0,0,0.45)';\n      badge.style.borderRadius = '4px';\n      badge.style.pointerEvents = 'none';\n      badge.style.userSelect = 'none';\n      container.appendChild(badge);\n    }\n    // Slot ID label (bottom-left) — always show (shortened)\n    const sid = document.createElement('div');\n    const short = (id: string) => {\n      const s = String(id || '');\n      const clean = s.startsWith('0x') ? s.slice(2) : s;\n      const head = clean.slice(0, 6);\n      return '0x' + head + (clean.length > 6 ? '…' : '');\n    };\n    sid.textContent = slotId ? `Slot: ${short(String(slotId))}` : '';\n    sid.style.position = 'absolute';\n    sid.style.left = '6px';\n    sid.style.bottom = '6px';\n    sid.style.padding = '2px 6px';\n    sid.style.font = '10px/1.2 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace';\n    sid.style.color = '#fff';\n    sid.style.background = 'rgba(0,0,0,0.35)';\n    sid.style.borderRadius = '4px';\n    sid.style.pointerEvents = 'none';\n    sid.style.userSelect = 'none';\n    sid.style.maxWidth = '70%';\n    sid.style.whiteSpace = 'nowrap';\n    sid.style.overflow = 'hidden';\n    sid.style.textOverflow = 'ellipsis';\n    if (sid.textContent) container.appendChild(sid);\n    container.onclick = () => {\n      try {\n        fetch(`${API_BASE}/api/track/click`, { method: 'POST', body: JSON.stringify({ slotId, url: meta.landing_url }) }).catch(() => {});\n      } catch {}\n      if (meta.landing_url) window.location.href = meta.landing_url;\n    };\n    el.replaceChildren(container);\n  } else {\n    const img = new Image();\n    img.src = walrusToHttp((meta as any).img_cid);\n    img.style.width = \"100%\";\n    img.style.height = \"100%\";\n    img.style.objectFit = \"cover\";\n    const container = document.createElement(\"div\");\n    container.style.position = \"relative\";\n    container.style.width = \"100%\";\n    container.style.height = \"100%\";\n    container.appendChild(img);\n    const hideLabel = (window as any).__AQUADS_HIDE_LABEL === true || (window as any).__SUI_AD_HIDE_LABEL === true;\n    if (!hideLabel) {\n      const badge = document.createElement(\"div\");\n      badge.textContent = \"Ad by Aquads\";\n      badge.style.position = \"absolute\";\n      badge.style.right = \"6px\";\n      badge.style.bottom = \"6px\";\n      badge.style.padding = \"2px 6px\";\n      badge.style.font = \"10px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif\";\n      badge.style.color = \"#fff\";\n      badge.style.background = \"rgba(0,0,0,0.45)\";\n      badge.style.borderRadius = \"4px\";\n      badge.style.pointerEvents = \"none\";\n      badge.style.userSelect = \"none\";\n      container.appendChild(badge);\n    }\n    img.onload = () => {\n      img.onclick = () => {\n        fetch(`${API_BASE}/api/track/click`, {\n          method: \"POST\",\n          body: JSON.stringify({ slotId, url: meta.landing_url }),\n        }).catch(() => {});\n        window.location.href = meta.landing_url;\n      };\n    };\n    img.onerror = () => {\n      renderPlaceholder(el, \"Image failed to load\");\n    };\n    el.replaceChildren(container);\n  }\n  // Start viewability tracking once creative is in DOM\n  try {\n    startViewability(el, { slotId });\n  } catch {}\n}\n\nexport function renderPlaceholder(el: HTMLElement, text: string) {\n  el.innerHTML = `<div style=\"display:flex;align-items:center;justify-content:center;background:#f2f3f5;color:#666;border:1px dashed #ccc;width:100%;height:100%;font:12px sans-serif;\">${text}</div>`;\n}\n\nexport function enforceSize(el: HTMLElement, w: number, h: number) {\n  const responsive = el.hasAttribute('data-responsive') || (el as any).dataset?.responsive === 'true';\n  if (responsive) {\n    el.style.width = '100%';\n    (el.style as any).aspectRatio = `${w} / ${h}`;\n    el.style.height = 'auto';\n    return;\n  }\n  el.style.width = `${w}px`;\n  el.style.height = `${h}px`;\n}\n\nexport function walrusToHttp(cid: string) {\n  if (cid.startsWith(\"mock://\")) {\n    // Local mock: return uploads path if meta or image present; here we just echo cid\n    return `/uploads/${cid.replace(/^mock:\\/\\//, \"\")}`; // might not exist for images; used for demo\n  }\n  if (cid.startsWith(\"walrus://\")) {\n    return cid.replace(\"walrus://\", (window as any).WALRUS_HTTP_GATEWAY || \"https://walrus.testnet/ipfs/\");\n  }\n  return cid;\n}\n\nexport async function fetchWalrusJSON(metaCid: string): Promise<SlotMeta> {\n  if (metaCid.startsWith(\"mock://sha256-\")) {\n    const id = metaCid.replace(\"mock://sha256-\", \"\");\n    return fetch(`/uploads/${id}.json`).then((r) => r.json());\n  }\n  const url = walrusToHttp(metaCid);\n  return fetch(url).then((r) => r.json());\n}\n\nexport function verifySeal(meta: SlotMeta): boolean {\n  // MVP: mocked verification. Set window.__SEAL_DISABLE=true to bypass.\n  const disabled = (window as any).__SEAL_DISABLE === true;\n  if (disabled) return true;\n  // Basic checksum format check\n  return /^sha256:[0-9a-fA-F]{64}$/.test(meta.checksum);\n}\n\ndeclare global {\n  interface Window {\n    Aquads: any;\n    SuiAds: any;\n    __SEAL_DISABLE?: boolean;\n    WALRUS_HTTP_GATEWAY?: string;\n  }\n}\n\n// UMD export (provide both Aquads and legacy SuiAds aliases)\nconst __aquadsUMD = {\n  mount: (el: HTMLElement | string, opts: { slotId?: string } = {}) => {\n    const elem = typeof el === \"string\" ? (document.querySelector(el) as HTMLElement) : el;\n    const slotId = opts.slotId || elem?.dataset?.slotId || document.currentScript?.getAttribute(\"data-slot\") || \"\";\n    if (!elem || !slotId) return;\n    mount(elem, slotId);\n  },\n  setApiBase,\n};\n(window as any).Aquads = __aquadsUMD;\n(window as any).SuiAds = __aquadsUMD;\n\n// --- Viewability (Active View-like) ---\ntype ViewabilityOpts = { slotId: string; thresholdPct?: number; minDurationMs?: number };\nexport function startViewability(el: HTMLElement, opts: ViewabilityOpts) {\n  const thresholdPct = opts.thresholdPct ?? 0.5; // 50%\n  const minDurationMs = opts.minDurationMs ?? 1000; // 1s\n  let visibleRatio = 0;\n  let maxRatio = 0;\n  let accumMs = 0;\n  let lastTs = performance.now();\n  let pageVisible = document.visibilityState === \"visible\";\n  const thresholds = Array.from({ length: 21 }, (_, i) => i / 20);\n\n  const io = new IntersectionObserver(\n    (entries) => {\n      const e = entries[0];\n      visibleRatio = e.intersectionRatio;\n      if (visibleRatio > maxRatio) maxRatio = visibleRatio;\n    },\n    { root: null, threshold: thresholds }\n  );\n  io.observe(el);\n\n  const onVis = () => {\n    pageVisible = document.visibilityState === \"visible\";\n    lastTs = performance.now();\n  };\n  document.addEventListener(\"visibilitychange\", onVis);\n\n  const timer = setInterval(() => {\n    const now = performance.now();\n    const dt = now - lastTs;\n    lastTs = now;\n    if (pageVisible && visibleRatio >= thresholdPct) accumMs += dt;\n    if (accumMs >= minDurationMs) {\n      try {\n        const payload = {\n          slotId: opts.slotId,\n          maxPct: Math.round(maxRatio * 100),\n          durationMs: Math.round(accumMs),\n          ts: Date.now(),\n        };\n        navigator.sendBeacon?.(\n          `${API_BASE}/api/track/view`,\n          new Blob([JSON.stringify(payload)], { type: \"application/json\" })\n        ) ||\n          fetch(`${API_BASE}/api/track/view`, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(payload),\n          });\n      } catch {}\n      cleanup();\n    }\n  }, 250);\n\n  function cleanup() {\n    clearInterval(timer);\n    io.disconnect();\n    document.removeEventListener(\"visibilitychange\", onVis);\n  }\n  return { stop: cleanup };\n}\n"],"names":["API_BASE","setApiBase","base","async","mount","el","slotId","latest","fetch","then","r","json","latestMetaCid","renderPlaceholder","meta","fetchWalrusJSON","verifySeal","enforceSize","width","height","type","img_cid","title","subtitle","container","document","createElement","style","position","bg","background","color","display","flexDirection","alignItems","justifyContent","textAlign","padding","textContent","font","opacity","appendChild","window","__AQUADS_HIDE_LABEL","__SUI_AD_HIDE_LABEL","badge","right","bottom","borderRadius","pointerEvents","userSelect","sid","short","id","s","String","clean","startsWith","slice","length","left","maxWidth","whiteSpace","overflow","textOverflow","onclick","method","body","JSON","stringify","url","landing_url","catch","_a","location","href","replaceChildren","img","Image","src","walrusToHttp","objectFit","onload","onerror","startViewability","text","innerHTML","w","h","hasAttribute","dataset","responsive","aspectRatio","cid","replace","WALRUS_HTTP_GATEWAY","metaCid","__SEAL_DISABLE","test","checksum","__aquadsUMD","opts","elem","querySelector","_b","currentScript","getAttribute","thresholdPct","minDurationMs","visibleRatio","maxRatio","accumMs","lastTs","performance","now","pageVisible","visibilityState","thresholds","Array","from","_","i","io","IntersectionObserver","entries","e","intersectionRatio","root","threshold","observe","onVis","addEventListener","timer","setInterval","dt","payload","maxPct","Math","round","durationMs","ts","Date","navigator","sendBeacon","call","Blob","headers","cleanup","clearInterval","disconnect","removeEventListener","stop","Aquads","SuiAds"],"mappings":"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"}